<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CodingPrime</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Inconsolata%7COswald%7COxygen%7CSource+Code+Pro">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/highlight.js.solarized.css">
  </head>
  <body>
    <header>
      <section class="container">
        <h1><a href="/">CodingPrime</a></h1><span>&lt;strong&gt;kung fu&lt;/strong&gt;</span><a href="https://github.com/t3hpr1m3/codingprime.com"><img style="position: absolute; top: 0; right: 0; border: 0" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>
      </section>
    </header>
    <main class="container">
      <article class="post">
        <header>
          <time datetime="2010-08-22 19:00">August 22, 2010</time>
          <h2><a href="/blog/2010/08/custom-requireauthenticationfor-rspec-matcher">Custom RSpec matcher:  require_authentication_for</a></h2>
        </header>
        <section>
          <p><p>Like everyone, I have a bunch of controller actions that need to be protected
from unauthorized users.  I&#39;ve got RSpec tests around these methods that look
like this:</p>
<pre><code class="hljs ruby">describe <span class="hljs-constant">UsersController</span>, <span class="hljs-string">'as guest'</span> <span class="hljs-keyword">do</span>
  before( <span class="hljs-symbol">:each</span> ) <span class="hljs-keyword">do</span>
    controller.stubs( <span class="hljs-symbol">:current_user</span> ).returns( <span class="hljs-keyword">nil</span> )
  <span class="hljs-keyword">end</span>

  describe <span class="hljs-string">'index'</span> <span class="hljs-keyword">do</span>
    it <span class="hljs-string">'should prevent access'</span> <span class="hljs-keyword">do</span>
      lambda { get <span class="hljs-symbol">:index</span> }.should
        raise_error( <span class="hljs-constant">Exceptions::PermissionDenied</span> )
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  describe <span class="hljs-string">'edit'</span> <span class="hljs-keyword">do</span>
    it <span class="hljs-string">'should prevent access'</span> <span class="hljs-keyword">do</span>
      lambda { get <span class="hljs-symbol">:edit</span>, <span class="hljs-symbol">:id</span> =&gt; <span class="hljs-number">1</span> }.should
        raise_error( <span class="hljs-constant">Exceptions::PermissionDenied</span> )
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  describe <span class="hljs-string">'create'</span> <span class="hljs-keyword">do</span>
    it <span class="hljs-string">'should prevent access'</span> <span class="hljs-keyword">do</span>
      lambda { post <span class="hljs-symbol">:create</span>, <span class="hljs-symbol">:id</span> =&gt; <span class="hljs-number">1</span> }.should
        raise_error( <span class="hljs-constant">Exceptions::PermissionDenied</span> )
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></code></pre></p>
        </section>
        <footer>
          <nav><a href="/blog/2010/08/custom-requireauthenticationfor-rspec-matcher" class="btn">Read More/Comment<i class="fa fa-arrow-right"></i></a></nav>
        </footer>
      </article>
      <article class="post">
        <header>
          <time datetime="2010-08-21 23:20">August 21, 2010</time>
          <h2><a href="/blog/2010/08/site-config-configyml-for-rails">Site Config (config.yml) for Rails</a></h2>
        </header>
        <section>
          <p><p>Over at <a href="http://railscasts.com/">Railscasts</a>, The Honourable Ryan Bates,
Esquire<sup>1</sup> has been churning out quality screencasts FOREVER.  And
while some of them become somewhat obsolete as Rails itself changes, they&#39;re
still a better starting point than most of what&#39;s available on the web.</p>
<p>One that I happened to view recently concerned
<a href="http://railscasts.com/episodes/85-yaml-configuration-file">application configuration</a>
for your Rails app being stored in a <code>.yml</code> file.  This brings site
configuration in line with database, fixtures, etc.  As usual, Ryan gives you
exactly what you need to adapt things to your situation.  So I did.  This is
my ApplicationConfiguration class.<sup>2</sup>  It basically gives you a global
<code>::AppConfig</code> object, which allows you to reverence any of your configuration
settings from a single place.  It supports nested configuration,
and automatically selects the right environment (test, production, etc).</p></p>
        </section>
        <footer>
          <nav><a href="/blog/2010/08/site-config-configyml-for-rails" class="btn">Read More/Comment<i class="fa fa-arrow-right"></i></a></nav>
        </footer>
      </article>
      <article class="post">
        <header>
          <time datetime="2010-08-21 18:12">August 21, 2010</time>
          <h2><a href="/blog/2010/08/dualbooting-raided-windows-non-raid-linux">Dual-booting Raided Windows/Non-Raid Linux</a></h2>
        </header>
        <section>
          <p><p>If you&#39;re following along at home, I got my Gentoo install
<a href="../moving-from-virtualbox-to-physical-disk">extracted</a> and running on physical
disk.  Now I have a problem to solve: Dual booting with Windows.  This is
only a problem because my Windows install is on a RAID0 array using an Intel
fakeraid controller.  I found all kinds of info on dual-booting Windows/Linux
while both are installed in the raid array, but nothing to help with my
situation.  So here we go.</p>
<h3 id="attempt-1-grub-on-the-linux-drive">Attempt #1 :: GRUB on the Linux drive</h3>
<p>My first attempt was to setup GRUB on the Linux drive, and tell the BIOS to
boot off that.  I knew I should add an entry to <code>grub.conf</code> to reference the
Windows drive and call <code>chainloader+</code>, but as I was typing it out I realized
that I didn&#39;t have a way to reference it.  My Spidey Sense&#0153; was telling
me I&#39;d need an initrd with all the raid info in it, so GRUB would know how to
talk to the entire RAID drive.  That sounds like work.  Moving on.</p></p>
        </section>
        <footer>
          <nav><a href="/blog/2010/08/dualbooting-raided-windows-non-raid-linux" class="btn">Read More/Comment<i class="fa fa-arrow-right"></i></a></nav>
        </footer>
      </article>
      <article class="post">
        <header>
          <time datetime="2010-08-21 15:50">August 21, 2010</time>
          <h2><a href="/blog/2010/08/moving-from-virtualbox-to-physical-disk">Moving from Virtualbox to Physical Disk</a></h2>
        </header>
        <section>
          <p><p>I decided to convert one of my Gentoo VirtualBox installs to physical disk
(ie. convert Virtual -&gt; Physical ).  This sounded pretty straightforward,
but after a bit of Googling, all I had found were a bunch of articlesi
explaining how to take a physical partition and convert it to a .vdi.  This
was exactly the opposite of what I wanted to do.</p>
<p>Finally, I found <a href="http://wiki.przemoc.net/tips/linux">this</a>
wiki article, and it all came together.</p>
<h3 id="preparing-the-disks">Preparing the disks</h3>
<p>I had a spare SATA drive laying around, so I powered off the machine and popped
it in.  Using my trusty Gentoo install CD, I partitioned the Linux disk.  My
Virtualbox install had a disk layout like this:</p></p>
        </section>
        <footer>
          <nav><a href="/blog/2010/08/moving-from-virtualbox-to-physical-disk" class="btn">Read More/Comment<i class="fa fa-arrow-right"></i></a></nav>
        </footer>
      </article>
      <article class="post">
        <header>
          <time datetime="2010-08-18 09:36">August 18, 2010</time>
          <h2><a href="/blog/2010/08/windows-updates-failing">Windows Updates Failing</a></h2>
        </header>
        <section>
          <p><p>I was having some updates fail on my machine here at work (KB983583, KB2279264,
KB2277947, and KB2251419 specifically), and couldn&#39;t seem to find any
resolution.  All the &quot;FixIt&quot;s from Microsoft crashed, and nothing in
<a href="http://social.answers.microsoft.com/Forums/en/vistawu/thread/36caf298-a7ce-4952-982d-e37920cfa439">this</a>
article seemed to help either.</p>
<p>Turns out, reinstalling the WindowsInstaller from
<a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=5a58b56f-60b6-4412-95b9-54d056d6f9f4&amp;displaylang=en">here</a>
did the trick.</p>
</p>
        </section>
        <footer>
          <nav><a href="/blog/2010/08/windows-updates-failing" class="btn">Read More/Comment<i class="fa fa-arrow-right"></i></a></nav>
        </footer>
      </article>
      <nav class="pagination"><a href="/blog/page/4/" class="btn pull-right">Older<i class="fa fa-chevron-circle-right"></i></a><a href="/blog/page/2/" class="btn pull-left"><i class="fa fa-chevron-circle-left"></i>Newer</a>
      </nav>
    </main>
    <footer class="site-footer">
      <section class="container clearfix">
        <p class="text"><span>&copy;2016 Josh Williams</span><a href="https://github.com/t3hpr1m3"><i class="fa fa-github fa-3x"></i></a><a href="https://twitter.com/t3hpr1m3"><i class="fa fa-twitter fa-3x"></i></a></p>
      </section>
    </footer>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-18124207-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>